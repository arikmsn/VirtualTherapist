# =============================================================================
# VirtualTherapist — Production Environment Variables
# =============================================================================
# Copy this file to .env on your server or paste values into Render/Vercel.
# NEVER commit real secrets to git. This file documents shape only.
#
# [REQUIRED]     Must be set before the app will start.
# [OPTIONAL]     Has a safe default; override only if needed.
# [PILOT-ONLY]   Only needed when the feature is active (e.g. WhatsApp).
# =============================================================================


# ── Application ───────────────────────────────────────────────────────────────

ENVIRONMENT=production          # [REQUIRED] must be "production"
APP_NAME=TherapyCompanion.AI    # [OPTIONAL] shown in UI/logs
CLINIC_NAME=TherapyCompanion    # [OPTIONAL] shown in WhatsApp appointment reminders
DEBUG=false                     # [OPTIONAL] never true in production
LOG_LEVEL=WARNING               # [OPTIONAL] WARNING or ERROR recommended in production


# ── Security ─────────────────────────────────────────────────────────────────
# Generate SECRET_KEY:    python -c "import secrets; print(secrets.token_hex(32))"
# Generate ENCRYPTION_KEY: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

SECRET_KEY=REPLACE_WITH_64_CHAR_HEX_STRING         # [REQUIRED] JWT signing key
ENCRYPTION_KEY=REPLACE_WITH_FERNET_KEY             # [REQUIRED] AES-256 key for patient PII

JWT_ALGORITHM=HS256                                 # [OPTIONAL]
ACCESS_TOKEN_EXPIRE_MINUTES=60                      # [OPTIONAL] 60 min for pilot


# ── Database ──────────────────────────────────────────────────────────────────
# Supabase: Settings → Database → Connection string (URI mode)
# Add ?sslmode=require at the end.
# Use the DIRECT connection (port 5432), not the pooled one, so Alembic works.

DATABASE_URL=postgresql://postgres:PASSWORD@db.PROJECTREF.supabase.co:5432/postgres?sslmode=require
# [REQUIRED]


# ── AI Provider ───────────────────────────────────────────────────────────────
# Only the key for the active provider is required.

AI_PROVIDER=anthropic                               # [REQUIRED] "anthropic" or "openai"
AI_MODEL=claude-3-5-sonnet-20241022                 # [OPTIONAL]

ANTHROPIC_API_KEY=sk-ant-REPLACE                    # [REQUIRED if AI_PROVIDER=anthropic]
# OPENAI_API_KEY=sk-REPLACE                         # [REQUIRED if AI_PROVIDER=openai]

TEMPERATURE=0.7                                     # [OPTIONAL]
MAX_TOKENS=2000                                     # [OPTIONAL]


# ── CORS ──────────────────────────────────────────────────────────────────────
# Comma-separated list of allowed frontend origins.
# Must match exactly what the browser sends (scheme + host + optional port).

CORS_ORIGINS=https://virtualtherapist.vercel.app    # [REQUIRED] your Vercel deployment URL
# Multiple: CORS_ORIGINS=https://a.vercel.app,https://custom.domain.com


# ── WhatsApp / Twilio ─────────────────────────────────────────────────────────
# Leave all TWILIO_* blank to use DevLogChannel (messages logged, not sent).
# Use API Key auth (preferred) OR Auth Token (legacy) — not both.

TWILIO_ACCOUNT_SID=ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX    # [PILOT-ONLY]

# API Key auth (preferred):
TWILIO_API_KEY_SID=SKXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX    # [PILOT-ONLY]
TWILIO_API_KEY_SECRET=REPLACE                            # [PILOT-ONLY]

# Legacy Auth Token (only if not using API Key):
# TWILIO_AUTH_TOKEN=REPLACE                              # [PILOT-ONLY]

TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886             # [PILOT-ONLY] your approved sender


# ── Privacy & Compliance ──────────────────────────────────────────────────────

DATA_REGION=IL                  # [OPTIONAL] "IL" or "EU"
ENABLE_ENCRYPTION=true          # [REQUIRED] must stay true in production
ENABLE_AUDIT_LOG=true           # [REQUIRED] must stay true in production
GDPR_COMPLIANT=true             # [OPTIONAL]


# ── Frontend (set in Vercel dashboard, not here) ──────────────────────────────
# VITE_API_URL=https://virtualtherapist-api.onrender.com/api/v1
